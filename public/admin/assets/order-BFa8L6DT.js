
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-DKdjIYRj.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-CiyjFa2H.js";import{A as R}from"./sales-CEP9_Um7.js";import{O as G,l as J}from"./index-J5zVJPyL.js";import{d as K,r as h,m as Q,a as X,n,q as Y,g as c,c as y,b as t,w as a,F as T,s as U,i as p,h as _,y as Z,z as S,e as b,t as $,k as B}from"./index-DEc4xym2.js";const E=b("div",{class:"flex items-center gap-4"},"提现工单管理",-1),ee=b("div",{class:"text-sm/6"},[b("div",null," 所有工单只可审核一次，请谨慎操作，打款请人工打款，确定打款后点击审核通过即可。 ")],-1),te=["src"],ae=K({__name:"order",setup(le){const C=h(),k=h(0),m=h(!1),o=Q({orderStatus:0,withdrawalChannels:null,page:1,size:10}),z=h([]);async function u(){try{m.value=!0;const s=await R.querySalesOrder(o);m.value=!1;const{rows:l,count:f}=s.data;k.value=f,z.value=l}catch{m.value=!1}}function P(s){s==null||s.resetFields(),u()}async function x(s,l){const{id:f}=s,w={id:f,status:l};await R.salesAuditOrder(w),u()}return X(()=>{u()}),(s,l)=>{const f=M,w=n("el-option"),O=n("el-select"),v=n("el-form-item"),g=n("el-button"),q=n("el-form"),V=W,i=n("el-table-column"),A=n("el-tag"),I=n("el-popconfirm"),F=n("el-table"),H=n("el-pagination"),j=n("el-row"),L=Y("loading");return c(),y("div",null,[t(f,null,{title:a(()=>[E]),content:a(()=>[ee]),_:1}),t(V,null,{default:a(()=>[t(q,{ref_key:"formRef",ref:C,inline:!0,model:o},{default:a(()=>[t(v,{label:"工单状态",prop:"orderStatus"},{default:a(()=>[t(O,{modelValue:o.orderStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>o.orderStatus=e),placeholder:"请选择工单状态",clearable:"",style:{width:"160px"}},{default:a(()=>[(c(!0),y(T,null,U(p(G),e=>(c(),S(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"提现渠道",prop:"withdrawalChannels"},{default:a(()=>[t(O,{modelValue:o.withdrawalChannels,"onUpdate:modelValue":l[1]||(l[1]=e=>o.withdrawalChannels=e),placeholder:"请选择提现渠道",clearable:"",style:{width:"160px"}},{default:a(()=>[(c(!0),y(T,null,U(p(J),e=>(c(),S(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:a(()=>[t(g,{type:"primary",onClick:u},{default:a(()=>[_(" 查询 ")]),_:1}),t(g,{onClick:l[2]||(l[2]=e=>P(p(C)))},{default:a(()=>[_(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(V,{style:{width:"100%"}},{default:a(()=>[Z((c(),S(F,{border:"",data:p(z),style:{width:"100%"},size:"large"},{default:a(()=>[t(i,{prop:"userInfo.avatar",label:"头像",width:"120"},{default:a(e=>{var r,d;return[b("img",{src:(d=(r=e.row)==null?void 0:r.userInfo)==null?void 0:d.avatar,style:{height:"50px"}},null,8,te)]}),_:1}),t(i,{prop:"withdrawalChannels",align:"center",label:"提现渠道"},{default:a(e=>{var r;return[t(A,{type:((r=e.row)==null?void 0:r.withdrawalChannels)===1?"info":"success"},{default:a(()=>{var d;return[_($(((d=e.row)==null?void 0:d.withdrawalChannels)===1?"支付宝":"微信"),1)]}),_:2},1032,["type"])]}),_:1}),t(i,{prop:"userInfo.email",label:"邮箱",width:"200"}),t(i,{prop:"withdrawalAmount",align:"center",label:"提现金额"}),t(i,{prop:"contactInformation",align:"center",label:"提现备注",width:"340"}),t(i,{prop:"remark",align:"center",label:"提现留言",width:"340"}),t(i,{prop:"orderStatus",align:"center",label:"工单状态",width:"140"},{default:a(e=>{var r,d;return[t(A,{type:((r=e.row)==null?void 0:r.orderStatus)===0?"info":((d=e.row)==null?void 0:d.orderStatus)===1?"success":"danger"},{default:a(()=>{var N,D;return[_($(((N=e.row)==null?void 0:N.orderStatus)===0?"待审核":((D=e.row)==null?void 0:D.orderStatus)===1?"已通过":"已拒绝"),1)]}),_:2},1032,["type"])]}),_:1}),t(i,{fixed:"right",label:"审核",width:"200",align:"center"},{default:a(e=>[t(I,{title:"确认通过审核吗、请您先手动打款后通过！",width:"260","icon-color":"red",onConfirm:r=>x(e.row,1)},{reference:a(()=>[t(g,{link:"",type:"primary",size:"small",disabled:e.row.orderStatus!==0},{default:a(()=>[_(" 通过审核 ")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"]),t(I,{title:"确认拒绝审核么、拒绝后此次提交将作废！",width:"260","icon-color":"red",onConfirm:r=>x(e.row,-1)},{reference:a(()=>[t(g,{link:"",type:"danger",size:"small",disabled:e.row.orderStatus!==0},{default:a(()=>[_(" 拒绝审核 ")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[L,p(m)]]),t(j,{class:"mt-5 flex justify-end"},{default:a(()=>[t(H,{"current-page":o.page,"onUpdate:currentPage":l[3]||(l[3]=e=>o.page=e),"page-size":o.size,"onUpdate:pageSize":l[4]||(l[4]=e=>o.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:p(k),onSizeChange:u,onCurrentChange:u},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof B=="function"&&B(ae);export{ae as default};
