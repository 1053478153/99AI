
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as S}from"./index.vue_vue_type_script_setup_true_lang-CHWp65cL.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-D6-4wUAO.js";import{A as $}from"./sales-DHN85h7l.js";import{d as q,r as p,m as N,a as j,n as r,q as F,g as x,c as H,b as e,w as t,h as u,i as m,y as M,z as T,e as _,t as P,k as V}from"./index-CAe0BuuW.js";const G=_("div",{class:"flex items-center gap-4"},"佣金分销明细",-1),J=_("div",{class:"text-sm/6"},[_("div",null," 每单的佣金会和此用户当前的返佣比例确定，用户返佣比例可手动变更。 ")],-1),K=["src"],L=q({__name:"records",setup(O){const v=p(),b=p(0),c=p(!1),n=N({orderPrice:null,orderId:null,page:1,size:10}),w=p([]);async function i(){try{c.value=!0;const s=await $.queryRecords(n);c.value=!1;const{rows:l,count:f}=s.data;b.value=f,w.value=l}catch{c.value=!1}}function k(s){s==null||s.resetFields(),i()}return j(()=>{i()}),(s,l)=>{const f=B,y=r("el-input"),g=r("el-form-item"),h=r("el-button"),C=r("el-form"),z=S,a=r("el-table-column"),I=r("el-tag"),D=r("el-table"),A=r("el-pagination"),U=r("el-row"),R=F("loading");return x(),H("div",null,[e(f,null,{title:t(()=>[G]),content:t(()=>[J]),_:1}),e(z,null,{default:t(()=>[e(C,{ref_key:"formRef",ref:v,inline:!0,model:n},{default:t(()=>[e(g,{label:"工单状态",prop:"orderPrice"},{default:t(()=>[e(y,{modelValue:n.orderPrice,"onUpdate:modelValue":l[0]||(l[0]=o=>n.orderPrice=o),placeholder:"订单金额"},null,8,["modelValue"])]),_:1}),e(g,{label:"订单ID",prop:"orderId"},{default:t(()=>[e(y,{modelValue:n.orderId,"onUpdate:modelValue":l[1]||(l[1]=o=>n.orderId=o),placeholder:"订单ID、模糊搜索"},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(h,{type:"primary",onClick:i},{default:t(()=>[u(" 查询 ")]),_:1}),e(h,{onClick:l[2]||(l[2]=o=>k(m(v)))},{default:t(()=>[u(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(z,{style:{width:"100%"}},{default:t(()=>[M((x(),T(D,{border:"",data:m(w),style:{width:"100%"},size:"large"},{default:t(()=>[e(a,{prop:"id",label:"ID",width:"50"}),e(a,{prop:"inviterAvatar",label:"邀请人头像",width:"120"},{default:t(o=>{var d;return[_("img",{src:(d=o.row)==null?void 0:d.inviterAvatar,style:{height:"50px"}},null,8,K)]}),_:1}),e(a,{prop:"inviterEmail",label:"邀请人邮箱",width:"200"}),e(a,{prop:"inviterUsername",label:"邀请人昵称",width:"200"}),e(a,{prop:"inviteeEmail",label:"被邀人邮箱",width:"200"}),e(a,{prop:"inviteeUsername",label:"邀请人昵称",width:"200"}),e(a,{prop:"orderPrice",align:"center",label:"订单金额"}),e(a,{prop:"commissionAmount",align:"center",label:"佣金金额"},{default:t(o=>[e(I,{type:"success"},{default:t(()=>{var d;return[u(" ￥"+P((d=o.row)==null?void 0:d.commissionAmount),1)]}),_:2},1024)]),_:1}),e(a,{prop:"commissionPercentage",align:"center",label:"佣金比例"},{default:t(o=>[u(P(`${o.row.commissionPercentage}%`),1)]),_:1})]),_:1},8,["data"])),[[R,m(c)]]),e(U,{class:"flex justify-end mt-5"},{default:t(()=>[e(A,{"current-page":n.page,"onUpdate:currentPage":l[3]||(l[3]=o=>n.page=o),"page-size":n.size,"onUpdate:pageSize":l[4]||(l[4]=o=>n.size=o),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:m(b),onSizeChange:i,onCurrentChange:i},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof V=="function"&&V(L);export{L as default};
