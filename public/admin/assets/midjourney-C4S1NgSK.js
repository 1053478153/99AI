
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-DKdjIYRj.js";import{A}from"./chat-CNvkcurJ.js";import{d as P,r as _,m as E,a as J,n as r,q as K,g as n,c,b as a,w as t,F as m,s as v,i as b,h as g,y as W,z as i,e as k,K as G,t as D,B as H,A as S,E as Q,k as I}from"./index-DEc4xym2.js";import{R as X,a as Y}from"./index-J5zVJPyL.js";const Z={class:"draw_container flex"},ee={class:"draw_head"},le={class:"draw_footer mt-3 flex items-center justify-between"},ae=P({__name:"midjourney",setup(te){const p=_(!1),h=_(),x=_(0),z=_(),o=E({userId:"",rec:"",status:3,page:1,size:10}),C=_([]);async function u(){p.value=!0;try{const s=await A.queryMjDrawAll(o),{rows:l,count:d}=s.data;p.value=!1,x.value=d,C.value=l}catch{p.value=!1}}async function M(s){const l=await A.recMjDrawImg({id:s});Q.success(l.data),u()}async function T(s){const l=await G.queryAllUser({size:30,username:s});z.value=l.data.rows}function j(s){s==null||s.resetFields(),u()}return J(()=>{u()}),(s,l)=>{const d=r("el-option"),y=r("el-select"),f=r("el-form-item"),w=r("el-button"),N=r("el-form"),V=$,R=r("el-image"),B=r("el-tag"),U=r("el-icon"),q=r("Minus"),L=r("el-pagination"),F=r("el-row"),O=K("loading");return n(),c("div",null,[a(V,null,{default:t(()=>[a(N,{ref_key:"formRef",ref:h,inline:!0,model:o},{default:t(()=>[a(f,{label:"用户名称",prop:"userId"},{default:t(()=>[a(y,{modelValue:o.userId,"onUpdate:modelValue":l[0]||(l[0]=e=>o.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用户姓名[模糊搜索]","remote-show-suffix":"","remote-method":T,style:{width:"160px"}},{default:t(()=>[(n(!0),c(m,null,v(z.value,e=>(n(),i(d,{key:e.id,label:e.username,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"推荐状态",prop:"rec"},{default:t(()=>[a(y,{modelValue:o.rec,"onUpdate:modelValue":l[1]||(l[1]=e=>o.rec=e),placeholder:"请选择推荐状态",clearable:"",style:{width:"160px"}},{default:t(()=>[(n(!0),c(m,null,v(b(X),e=>(n(),i(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"绘制状态",prop:"status"},{default:t(()=>[a(y,{modelValue:o.status,"onUpdate:modelValue":l[2]||(l[2]=e=>o.status=e),placeholder:"请选择图片绘制状态",clearable:"",style:{width:"160px"}},{default:t(()=>[(n(!0),c(m,null,v(b(Y),e=>(n(),i(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,null,{default:t(()=>[a(w,{type:"primary",onClick:u},{default:t(()=>[g(" 查询 ")]),_:1}),a(w,{onClick:l[3]||(l[3]=e=>j(h.value))},{default:t(()=>[g(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),W((n(),i(V,{style:{width:"100%"}},{default:t(()=>[k("div",Z,[(n(!0),c(m,null,v(C.value,e=>(n(),c("div",{key:e.id,style:{height:"280px"},class:"draw_img_container flex border"},[k("div",ee,[a(R,{fit:"contain","preview-src-list":[e.drawUrl],src:e.drawUrl,lazy:"",class:"draw_img","hide-on-click-modal":""},null,8,["preview-src-list","src"])]),k("div",le,[a(B,{class:"ml-2",type:e.rec?"success":"info"},{default:t(()=>[g(D(e.rec?"已推荐":"未推荐"),1)]),_:2},1032,["type"]),a(w,{type:"warning",plain:"",size:"small",onClick:oe=>M(e.id)},{default:t(()=>[g(D(e.rec?"取消推荐":"加入推荐")+" ",1),e.rec?S("",!0):(n(),i(U,{key:0},{default:t(()=>[a(b(H))]),_:1})),e.rec?(n(),i(U,{key:1},{default:t(()=>[a(q)]),_:1})):S("",!0)]),_:2},1032,["onClick"])])]))),128))]),a(F,{class:"mt-5 flex justify-end"},{default:t(()=>[a(L,{"current-page":o.page,"onUpdate:currentPage":l[4]||(l[4]=e=>o.page=e),"page-size":o.size,"onUpdate:pageSize":l[5]||(l[5]=e=>o.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:x.value,onSizeChange:u,onCurrentChange:u},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[O,p.value]])])}}});typeof I=="function"&&I(ae);export{ae as default};
