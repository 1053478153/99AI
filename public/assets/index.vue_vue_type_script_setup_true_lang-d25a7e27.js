import{X as i,r as T,e as n,d as F,a as fe,f as pe,w as K,l as re,F as R,S as o,U as p,a3 as a,ae as Ge,c as W,a4 as v,M as t,a6 as ae,k as me,a7 as Ee,V as P,a5 as $,W as w,z as ye,a8 as A,ab as We,H as ie,v as Oe}from"./vue-10b4afc0.js";import{w as Q,t as h,o as he,q as Ve,e as ve,a as ke,N as Ke,u as He}from"./index-d64a7cc4.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang-f425914e.js";import{u as be}from"./useBasicLayout-a4f17bae.js";import{I as le,d as xe,e as Re,s as Fe,o as Ze,E as Je,T as Xe,f as ue,S as we,M as _e,b as V,g as Ce,U as ce,D as Qe,A as Ye,C as et,a as tt,c as at,L as lt}from"./menu-19bde8fc.js";import{e as st,G as Se,d as ot,R as nt}from"./naive-ui-fedd20b1.js";const rt=le("application-two",!1,function(e){return i("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[i("circle",{cx:"34.5",cy:"13.5",r:"6.5",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null),i("circle",{cx:"34.5",cy:"34.5",r:"6.5",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null),i("circle",{cx:"13.5",cy:"13.5",r:"6.5",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null),i("circle",{cx:"13.5",cy:"34.5",r:"6.5",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null)])}),de=le("down",!1,function(e){return i("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[i("path",{d:"M36 18L24 30L12 18",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ge=le("up",!1,function(e){return i("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[i("path",{d:"M13 30L25 18L37 30",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});function it(e,d,g){let f=T(g==null?void 0:g.value),r=n(()=>e.value!==void 0);return[n(()=>r.value?e.value:f.value),function(l){return r.value||(f.value=l),d==null?void 0:d(l)}]}var $e=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))($e||{});let ut=F({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:d,attrs:g}){return()=>{var f;let{features:r,...l}=e,E={"aria-hidden":(r&2)===2?!0:(f=l["aria-hidden"])!=null?f:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return xe({ourProps:E,theirProps:l,slot:{},attrs:g,slots:d,name:"Hidden"})}}});function ct(e){var d,g;let f=(d=e==null?void 0:e.form)!=null?d:e.closest("form");if(f){for(let r of f.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(g=f.requestSubmit)==null||g.call(f)}}let dt=Symbol("GroupContext"),gt=F({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:d,attrs:g,slots:f,expose:r}){var l;let E=(l=e.id)!=null?l:`headlessui-switch-${Re()}`,z=fe(dt,null),[j,_]=it(n(()=>e.modelValue),s=>d("update:modelValue",s),n(()=>e.defaultChecked));function N(){_(!j.value)}let b=T(null),C=z===null?b:z.switchRef,I=Fe(n(()=>({as:e.as,type:g.type})),C);r({el:C,$el:C});function x(s){s.preventDefault(),N()}function k(s){s.key===ue.Space?(s.preventDefault(),N()):s.key===ue.Enter&&ct(s.currentTarget)}function B(s){s.preventDefault()}let G=n(()=>{var s,m;return(m=(s=Ze(C))==null?void 0:s.closest)==null?void 0:m.call(s,"form")});return pe(()=>{K([G],()=>{if(!G.value||e.defaultChecked===void 0)return;function s(){_(e.defaultChecked)}return G.value.addEventListener("reset",s),()=>{var m;(m=G.value)==null||m.removeEventListener("reset",s)}},{immediate:!0})}),()=>{let{name:s,value:m,form:M,tabIndex:O,...H}=e,Z={checked:j.value},q={id:E,ref:C,role:"switch",type:I.value,tabIndex:O===-1?0:O,"aria-checked":j.value,"aria-labelledby":z==null?void 0:z.labelledby.value,"aria-describedby":z==null?void 0:z.describedby.value,onClick:x,onKeyup:k,onKeypress:B};return re(R,[s!=null&&j.value!=null?re(ut,Je({features:$e.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:j.value,form:M,disabled:H.disabled,name:s,value:m})):null,xe({ourProps:q,theirProps:{...g,...Xe(H,["modelValue","defaultChecked"])},slot:Z,attrs:g,slots:f,name:"Switch"})])}}});function ft(e,d){return o(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function pt(e,d){return o(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}function mt(e,d){let g;return(...f)=>{const r=()=>{clearTimeout(g),e(...f)};clearTimeout(g),g=setTimeout(r,d)}}const yt={class:"mt-3 mb-1 text-xs font-bold"},ht={class:"ml-1"},vt=["onClick"],kt={class:"flex items-center"},bt=["onUpdate:modelValue","onKeypress"],xt={key:1,class:"flex-1 truncate max-w-48"},wt={key:0,class:"absolute z-10 right-2"},_t={class:"py-1"},Ct=["onClick"],St=["onClick"],$t=["onClick"],te=F({__name:"ListItem",props:{dataSources:{},title:{}},emits:["update","delete","sticky","select"],setup(e,{emit:d}){const g=e,f=d,r=g.dataSources,l=Q();async function E(x){f("select",x)}function z(x,k,B){B==null||B.stopPropagation(),x.isEdit=k}async function j(x,k){k==null||k.stopPropagation(),await l.updateGroupInfo({isSticky:!x.isSticky,groupId:x.uuid})}async function _(x,k){k==null||k.stopPropagation(),f("delete",x)}const N=mt(_,600);async function b(x){const{uuid:k,title:B}=x;x.isEdit=!1,await l.updateGroupInfo({groupId:k,title:B})}async function C(x,k){k==null||k.stopPropagation(),k.key==="Enter"&&b(x)}function I(x){return l.active===x}return(x,k)=>{var G;const B=Ge("focus");return o(),p(R,null,[a("p",yt,[W(v(g.title)+" ",1),a("span",ht,"("+v((G=t(r))==null?void 0:G.length)+")",1)]),(o(!0),p(R,null,ae(t(r),s=>(o(),p("div",{key:`${s.uuid}`},[a("div",{class:A(["relative flex items-center gap-3 px-3 py-2 break-all rounded-md cursor-pointer hover:bg-white group dark:hover:bg-gray-800 font-medium text-sm",I(s.uuid)?["bg-white","text-primary-600","dark:bg-gray-800","dark:text-white"]:["text-gray-700","dark:bg-gray-900","dark:text-gray-400"]]),onClick:m=>E(s)},[a("div",kt,[s.isEdit?me((o(),p("input",{key:0,"onUpdate:modelValue":m=>s.title=m,type:"text",class:"bg-transparent border border-gray-200 dark:border-gray-400 px-1 shadow-none flex-1 truncate",onKeypress:m=>C(s,m)},null,40,bt)),[[Ee,s.title],[B]]):(o(),p("span",xt,v(s.title),1)),s.isEdit?(o(),P(t(ft),{key:2,class:"h-5 w-5 ml-2","aria-hidden":"true",onClick:m=>b(s)},null,8,["onClick"])):$("",!0)]),I(s.uuid)?(o(),p("div",wt,[s.isEdit?$("",!0):(o(),P(t(Ce),{key:0,as:"div",class:"relative inline-block text-left"},{default:w(()=>[i(t(we),{class:"p-1"},{default:w(()=>[i(t(pt),{class:"h-5 w-5","aria-hidden":"true"})]),_:1}),i(ye,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:w(()=>[i(t(_e),{class:"absolute right-0 z-10 mt-2 w-32 text-gray-700 dark:text-gray-400 origin-top-right text-b rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none bg-primary-100 dark:bg-gray-800"},{default:w(()=>[a("div",_t,[i(t(V),{as:"template"},{default:w(({active:m})=>[a("button",{class:A([m?"flex items-center bg-gray-100 dark:bg-gray-700 ":"flex items-center ","block w-full px-4 py-2 text-left text-sm"]),onClick:M=>z(s,!0,M)},v(t(h)("chat.rename")),11,Ct)]),_:2},1024),i(t(V),{as:"template"},{default:w(({active:m})=>[a("button",{class:A([m?"flex items-end mr-3 bg-gray-100 dark:bg-gray-700":"flex items-end ","block w-full px-4 py-2 text-left text-sm"]),onClick:M=>j(s,M)},v(s.isSticky?t(h)("chat.unfavorite"):t(h)("chat.favoriteConversations")),11,St)]),_:2},1024),i(t(V),{as:"template"},{default:w(({active:m})=>[a("button",{class:A([m?"flex items-center bg-gray-100 dark:bg-gray-700":"flex items-center ","block w-full px-4 py-2 text-left text-sm"]),onClick:M=>t(N)(s,M)},v(t(h)("chat.deleteConversation")),11,$t)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024))])):$("",!0)],10,vt)]))),128))],64)}}}),jt={class:"flex flex-col gap-3 text-sm"},Tt={key:0,class:"flex flex-col items-center mt-4 text-center text-neutral-300"},Nt={class:"mt-3 mb-1 text-xs font-bold"},It=["onClick"],Mt={class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"},Lt=["src"],Dt={key:1,class:"text-sm font-medium"},At=F({__name:"List",setup(e){const{isMobile:d}=be(),g=he(),f=Ve(),r=ve(),l=Q(),E=ke(),z=st(),j=T(100),_=Ke(),N=T(!1),b=T(!1),C=n(()=>l.groupList),I=n(()=>l.groupKeyWord);K(C,()=>j.value=j.value+1),K(I,()=>j.value=j.value+1);const x=n(()=>l.isStreamIn!==void 0?l.isStreamIn:!1);n(()=>E.isLogin);const k=fe("createNewChatGroup",async u=>{}),B=n(()=>_.mineApps);function G(u){const U=new Date(u).getTime()+8*60*60*1e3;return new Date(U).getTime()}const s=new Date().setHours(0,0,0,0),m=n(()=>C.value.filter(u=>I.value?u.title.includes(I.value)&&u.isSticky:u.isSticky)),M=n(()=>C.value.filter(u=>I.value?u.title.includes(I.value)&&!u.isSticky&&G(u.updatedAt)>=s:!u.isSticky&&G(u.updatedAt)>=s)),O=n(()=>C.value.filter(u=>I.value?u.title.includes(I.value)&&!u.isSticky&&G(u.updatedAt)<s:!u.isSticky&&G(u.updatedAt)<s));async function H(u){if(x.value){z.info("AI回复中，请稍后再试");return}const{uuid:S}=u;J(S)||(await l.setActiveGroup(S),f.name!=="Chat"&&g.push("/chat"),d.value&&r.setSiderCollapsed(!0))}async function Z(u){_.queryMineApps(),k(u)}async function q(u){event==null||event.stopPropagation(),await l.deleteGroup(u),await l.queryMyGroup(),d.value&&r.setSiderCollapsed(!0)}function J(u){return l.active===u}function X(){g.replace("/chatStore")}return K(()=>E.isLogin,(u,S)=>{u===!0&&(_.queryMineApps(),l.queryMyGroup())},{immediate:!0}),(u,S)=>(o(),P(t(Se),{class:"px-4"},{default:w(()=>[a("div",jt,[C.value.length?(o(),p(R,{key:1},[a("p",Nt,v(t(h)("chat.myApps")),1),(o(!0),p(R,null,ae(b.value?B.value:B.value.slice(0,4),U=>(o(),p("div",{key:U.appId,onClick:Y=>Z(U.appId),class:"relative flex items-center gap-3 px-3 py-1 break-all rounded-md cursor-pointer hover:bg-white group dark:hover:bg-gray-800 font-medium text-sm 'text-gray-700', 'dark:bg-gray-900', 'dark:text-gray-400'"},[a("div",Mt,[U.coverImg?(o(),p("img",{key:0,src:U.coverImg,alt:"app cover",class:"w-full h-full object-cover"},null,8,Lt)):(o(),p("span",Dt,v(U.appName.charAt(0)),1))]),a("button",null,v(U.appName),1)],8,It))),128)),B.value.length>4?(o(),p("button",{key:0,class:"relative flex items-center gap-3 px-3 break-all rounded-md cursor-pointer text-gray-900 dark:text-gray-400 text-xs font-bold",onClick:S[0]||(S[0]=U=>b.value=!b.value)},[W(v(b.value?t(h)("chat.collapse"):t(h)("chat.more"))+" ",1),b.value?(o(),P(t(ge),{key:1,theme:"outline",size:"20"})):(o(),P(t(de),{key:0,theme:"outline",size:"20"}))])):$("",!0),a("div",{class:"relative flex items-center gap-3 px-3 py-1 break-all rounded-md cursor-pointer hover:bg-white group dark:hover:bg-gray-800 font-medium text-sm 'text-gray-700', 'dark:bg-gray-900', 'dark:text-gray-400'",onClick:X},[i(t(rt),{theme:"outline",size:"25",class:"ml-1 mr-1 text-sm my-1 text-gray-600"}),W(" "+v(t(h)("chat.appSquare")),1)]),m.value.length?(o(),P(te,{key:`stickyList-${N.value}-${m.value}`,title:t(h)("chat.favorites"),"data-sources":N.value?m.value:m.value.slice(0,5),onSelect:H,onDelete:q},null,8,["title","data-sources"])):$("",!0),m.value.length>5?(o(),p("button",{key:2,class:"relative flex items-center gap-3 px-3 break-all rounded-md cursor-pointer text-gray-900 dark:text-gray-400 text-xs font-bold",onClick:S[1]||(S[1]=U=>N.value=!N.value)},[W(v(N.value?t(h)("chat.collapse"):t(h)("chat.more"))+" ",1),N.value?(o(),P(t(ge),{key:1,theme:"outline",size:"20"})):(o(),P(t(de),{key:0,theme:"outline",size:"20"}))])):$("",!0),M.value.length?(o(),P(te,{key:3e3+j.value,title:t(h)("chat.todayConversations"),"data-sources":M.value,onSelect:H,onDelete:q},null,8,["title","data-sources"])):$("",!0),O.value.length?(o(),P(te,{key:4e3+j.value,title:t(h)("chat.historyConversations"),"data-sources":O.value,onSelect:H,onDelete:q},null,8,["title","data-sources"])):$("",!0)],64)):(o(),p("div",Tt,[i(t(qe),{icon:"ri:inbox-line",class:"mb-2 text-3xl"}),a("span",null,v(u.$t("common.noData")),1)]))])]),_:1}))}}),zt={class:"flex flex-col gap-3 text-sm"},Pt={class:"flex items-center justify-between w-full my-1"},Bt={class:"flex items-center space-x-2"},Ut={class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden shadow-sm border border-gray-300"},Gt=["src"],Et={key:1,class:"text-sm font-medium"},Wt={class:"line-clamp-1 overflow-hidden text-ellipsis w-32 block whitespace-nowrap font-medium text-base text-gray-600 dark:text-gray-400"},Ot=a("span",{"aria-hidden":"true",class:"pointer-events-none absolute h-full w-full rounded-full bg-white dark:bg-transparent"},null,-1),Vt={class:"text-xs line-clamp-2 text-gray-500 dark:text-gray-400 mb-2"},Kt=F({__name:"Plugin",setup(e){const d=Q(),g=T(100),f=n(()=>d.groupList),r=n(()=>d.groupKeyWord),l=[],E=n(()=>{var _;return(_=d.pluginList)!=null&&_.length?d.pluginList:l});K(f,()=>g.value=g.value+1),K(r,()=>g.value=g.value+1);const z=n(()=>d.currentPlugin);f.value.filter(_=>r.value?_.title.includes(r.value)&&_.isSticky:_.isSticky);function j(_){var N;((N=z.value)==null?void 0:N.parameters)===_.parameters?d.setUsingPlugin(null):d.setUsingPlugin(_)}return pe(()=>{d.queryPlugins(),d.queryMyGroup()}),(_,N)=>(o(),P(t(Se),{class:"px-4 py-2 bg-gray"},{default:w(()=>[a("div",zt,[(o(!0),p(R,null,ae(E.value,b=>(o(),p("div",{key:b.parameters,class:"select-none relative h-26 bg-white shadow flex flex-col items-start gap-3 px-3 py-1 break-all rounded-md cursor-pointer hover:bg-white group dark:hover:bg-gray-800 font-medium text-sm text-gray-700 dark:bg-gray-900 dark:text-gray-400"},[a("div",Pt,[a("div",Bt,[a("div",Ut,[b.pluginImg?(o(),p("img",{key:0,src:b.pluginImg,alt:"App cover",class:"w-full h-full object-cover"},null,8,Gt)):(o(),p("span",Et,v(b.pluginName.charAt(0)),1))]),a("span",Wt,v(b.pluginName),1)]),i(t(gt),{class:A(["group relative inline-flex h-5 w-10 flex-shrink-0 cursor-pointer items-center justify-center rounded-full focus:outline-none"]),onClick:We(C=>j(b),["prevent"])},{default:w(()=>{var C,I;return[Ot,a("span",{"aria-hidden":"true",class:A([((C=z.value)==null?void 0:C.parameters)===b.parameters?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700","pointer-events-none absolute mx-auto h-4 w-9 rounded-full transition-colors duration-200 ease-in-out"])},null,2),a("span",{"aria-hidden":"true",class:A([((I=z.value)==null?void 0:I.parameters)===b.parameters?"translate-x-5":"translate-x-0","pointer-events-none absolute left-0 inline-block h-5 w-5 transform rounded-full border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-500 shadow ring-0 transition-transform duration-200 ease-in-out"])},null,2)]}),_:2},1032,["onClick"])]),a("div",null,[a("span",Vt,v(b.description),1)])]))),128))])]),_:1}))}}),Ht={class:"flex flex-col h-full flex-1"},qt={class:"flex bg-gray-50 w-full justify-between items-center px-4 dark:bg-gray-900 h-14"},Rt={class:"w-full flex justify-center space-x-2 font-medium rounded-full bg-gray-100 dark:bg-gray-800 shadow-sm"},Ft={class:"flex-1 min-h-0 overflow-hidden"},Zt={class:"p-4 pb-1 pt-1 border-t-gray-100 dark:border-t-gray-800 flex items-center justify-between text-left w-full"},Jt={class:"w-8 h-8 mb-2 rounded-full bg-primary-600 flex items-center justify-center overflow-hidden shadow-sm border border-gray-300"},Xt=["src"],Qt={class:"py-1"},Yt=a("button",{type:"button",class:"inline-flex mb-2 justify-center items-center rounded-md bg-white dark:bg-gray-900 px-3 py-2 text-sm text-gray-500 shadow-sm ring-1 ring-inset ring-gray-200 dark:ring-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 w-full"},[a("span",null,"登录 / 注册")],-1),ea=[Yt],ta={type:"button",class:"inline-flex mb-2 justify-center items-center rounded-md bg-white dark:bg-gray-900 px-3 py-2 text-sm text-gray-500 shadow-sm ring-1 ring-inset ring-gray-200 dark:ring-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 w-full"},aa={key:0,class:"w-full flex justify-center items-center pb-3 text-xs text-gray-500"},la={class:"ml-2 transition-all text-gray-500 hover:text-gray-600 dark:hover:text-gray-400",href:"https://beian.miit.gov.cn",target:"_blank"},ca=F({__name:"index",setup(e){const d=He(),g=he(),f=ve(),r=Q(),l=ke(),E=T(null),z=T(null),j=T(null),_=n(()=>{var y;return Number((y=l.globalConfig)==null?void 0:y.signInStatus)===1}),N=n(()=>{var y;return Number((y=l.globalConfig)==null?void 0:y.isHideSidebar)===1}),b=n(()=>f.theme==="dark"),C=n(()=>l.userBalance),I=ot(),x=T(0),k=T(0),B=T(0),G=T(0),s=T(0),m=T(0),{isMobile:M}=be(),O=n(()=>l.isLogin);n(()=>l.globalConfig.clientLogoPath),n(()=>l.globalConfig.clientHomePath||"/");const H=n(()=>l.globalConfig.model3Name||h("chat.ordinaryPoints")),Z=n(()=>l.globalConfig.model4Name)||h("chat.advancedPoints"),q=n(()=>l.globalConfig.drawMjName)||h("chat.drawingPoints"),J=n(()=>Number(l.globalConfig.pluginFirst)===1),X=n(()=>l.userInfo.avatar),u=n(()=>f.siderCollapsed);T("");const S=T(J.value?"plugin":"chat");T(!1);const U=n(()=>l.globalConfig),Y=n(()=>{var y,c;return((y=U.value)==null?void 0:y.companyName)&&((c=U.value)==null?void 0:c.filingNumber)}),je=n(()=>r.groupList.find(c=>c.uuid===r.active)),Te=n(()=>{var y;try{return JSON.parse(((y=je.value)==null?void 0:y.config)||"{}")}catch{return{}}}),Ne=n(()=>r==null?void 0:r.activeModelDeductType),se=n(()=>{const y=Te.value.deductType||Ne.value;let c,L;switch(y){case 1:c=C.value.sumModel3Count||0,L=H.value;break;case 2:c=C.value.sumModel4Count||0,L=Z.value;break;case 3:c=C.value.sumDrawMjCount||0,L=q.value;break;default:c=0,L=h("chat.points")}return{remainingPoints:c,buttonText:L}});async function Ie(){await Me(),g.replace({path:"user-center"})}async function Me(){return new Promise(y=>{setTimeout(()=>{l.isLogin||g.replace({path:"login"}),y()},100)})}function Le(){const y=b.value?"light":"dark";f.setTheme(y)}async function De(){I.warning({title:h("chat.clearConversation"),content:h("chat.clearAllNonFavoriteConversations"),positiveText:h("common.confirm"),negativeText:h("common.cancel"),onPositiveClick:async()=>{await r.delAllGroup()}})}function oe(){f.setSiderCollapsed(!u.value)}function Ae(){O.value?l.logOut():l.setLoginDialog(!0)}function ze(){if(!O.value){l.setLoginDialog(!0);return}d.updateSignInDialog(!0)}function Pe(){l.logOut(),g.push("/")}const Be=n(()=>M.value?{position:"fixed",zIndex:50}:{}),Ue=n(()=>M.value?{paddingBottom:"env(safe-area-inset-bottom)"}:{});return K(M,y=>{f.setSiderCollapsed(y)},{immediate:!0,flush:"post"}),K(()=>l.userBalance.useModel3Token,(y,c)=>{var L;x.value=c||0,k.value=y||0,(L=E.value)==null||L.play()},{immediate:!0,flush:"post"}),K(()=>l.userBalance.useModel4Token,(y,c)=>{var L;B.value=c||0,G.value=y||0,(L=z.value)==null||L.play()},{immediate:!0,flush:"post"}),K(()=>l.userBalance.useDrawMjToken,(y,c)=>{var L;s.value=c||0,m.value=y||0,(L=j.value)==null||L.play()},{immediate:!0,flush:"post"}),(y,c)=>(o(),p("div",null,[i(t(nt),{collapsed:u.value,"collapsed-width":0,width:260,"collapse-mode":"transform",position:"absolute",bordered:"",style:ie(Be.value),onUpdateCollapsed:oe},{default:w(()=>{var L,ne;return[a("div",{class:"flex flex-col h-full bg-gray-50 dark:bg-gray-900 select-none",style:ie(Ue.value)},[a("main",Ht,[a("div",qt,[a("div",Rt,[J.value?(o(),p("button",{key:0,onClick:c[0]||(c[0]=D=>S.value="plugin"),class:A([{"bg-white dark:bg-gray-700 text-primary-600 dark:text-gray-100 ":S.value==="plugin","dark:text-gray-400":S.value!=="plugin"},"block w-full rounded-full focus:outline-none py-1"])}," 插件 ",2)):$("",!0),a("button",{onClick:c[1]||(c[1]=D=>S.value="chat"),class:A([{"bg-white dark:bg-gray-700 text-primary-600 dark:text-gray-100 ":S.value==="chat","":S.value!=="chat"},"block w-full rounded-full focus:outline-none py-1 dark:text-gray-600"])}," 对话 ",2),J.value?$("",!0):(o(),p("button",{key:1,onClick:c[2]||(c[2]=D=>S.value="plugin"),class:A([{"bg-white dark:bg-gray-700 text-primary-600 dark:text-gray-100 ":S.value==="plugin","dark:text-gray-400":S.value!=="plugin"},"block w-full rounded-full focus:outline-none py-1"])}," 插件 ",2))])]),a("div",Ft,[S.value==="chat"?(o(),P(At,{key:0})):$("",!0),S.value==="plugin"?(o(),P(Kt,{key:1})):$("",!0)]),a("div",Zt,[O.value&&(t(M)||N.value)?(o(),P(t(Ce),{key:0,as:"div",class:"relative inline-block text-left"},{default:w(()=>[a("div",null,[i(t(we),{class:"inline-flex w-full justify-center gap-x-1.5 rounded-md pr-3 py-2 text-sm font-semibold dark:text-gray-400 text-gray-700"},{default:w(()=>[a("div",Jt,[X.value?(o(),p("img",{key:0,src:X.value,class:"w-full h-full object-cover"},null,8,Xt)):$("",!0),X.value?$("",!0):(o(),P(t(ce),{key:1,theme:"outline",size:"20",class:"text-white"}))])]),_:1})]),i(ye,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:w(()=>[i(t(_e),{class:"absolute w-[228px] left-0 bottom-full mb-2 origin-bottom-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-gray-800 dark:text-gray-400 text-gray-900 z-50"},{default:w(()=>[a("div",Qt,[i(t(V),null,{default:w(({active:D})=>[a("a",{href:"#",class:A([[D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"],"border-b border-b-gray-100 dark:border-b-gray-800"]),onClick:De},[i(t(Qe),{theme:"outline",size:"16",class:"mr-2"}),W(" "+v(t(h)("chat.clear")),1)],2)]),_:1}),i(t(V),null,{default:w(({active:D})=>[a("a",{href:"#",class:A([D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"]),onClick:c[3]||(c[3]=ee=>t(d).updateNoticeDialog(!0))},[i(t(Ye),{theme:"outline",size:"16",class:"mr-2"}),W(" "+v(t(h)("chat.announcement")),1)],2)]),_:1}),i(t(V),null,{default:w(({active:D})=>[a("a",{href:"#",class:A([D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"]),onClick:c[4]||(c[4]=ee=>t(d).updateGoodsDialog(!0))},[i(t(et),{theme:"outline",size:"16",class:"mr-2"}),W(" "+v(t(h)("chat.pointsMall")),1)],2)]),_:1}),i(t(V),null,{default:w(({active:D})=>[a("a",{href:"#",class:A([D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"]),onClick:Le},[i(t(tt),{theme:"outline",size:"16",class:"mr-2"}),W(" "+v(t(h)("chat.toggleTheme")),1)],2)]),_:1}),_.value?(o(),P(t(V),{key:0},{default:w(({active:D})=>[a("a",{href:"#",class:A([D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"]),onClick:ze},[i(t(at),{theme:"outline",size:"16",class:"mr-2"}),W(" "+v(t(h)("chat.signInReward")),1)],2)]),_:1})):$("",!0),i(t(V),null,{default:w(({active:D})=>[a("a",{href:"#",class:A([D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"]),onClick:c[5]||(c[5]=ee=>Ie())},[i(t(ce),{theme:"outline",size:"16",class:"mr-2"}),W(" 个人中心 ")],2)]),_:1}),i(t(V),null,{default:w(({active:D})=>[a("a",{href:"#",class:A([D?"bg-gray-100  dark:bg-gray-700":"","group flex items-center justify-start px-2 py-2 text-sm whitespace-nowrap"]),onClick:c[6]||(c[6]=ee=>Pe())},[i(t(lt),{theme:"outline",size:"16",class:"mr-2"}),W(" 退出登录 ")],2)]),_:1})])]),_:1})]),_:1})]),_:1})):$("",!0),O.value?$("",!0):(o(),p("div",{key:1,onClick:Ae,class:"flex flex-1 items-center justify-center cursor-pointer"},ea)),O.value?(o(),p("div",{key:2,onClick:c[7]||(c[7]=D=>t(d).updateGoodsDialog(!0)),class:"flex flex-1 items-center justify-center cursor-pointer"},[a("button",ta,[a("span",null,v(t(h)("chat.remaining")+`${se.value.remainingPoints} ${se.value.buttonText}`),1)])])):$("",!0)]),Y.value&&t(M)?(o(),p("div",aa,[W(" 版权所有 © "+v((L=U.value)==null?void 0:L.companyName)+" ",1),a("a",la,v((ne=U.value)==null?void 0:ne.filingNumber),1)])):$("",!0)])],4)]}),_:1},8,["collapsed","style"]),t(M)?me((o(),p("div",{key:0,class:"fixed inset-0 z-40 bg-black/40",onClick:oe},null,512)),[[Oe,!u.value]]):$("",!0)]))}});export{de as D,ca as _};
