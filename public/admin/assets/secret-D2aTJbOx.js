
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{a as h}from"./config-BQ9gBCXa.js";import{d as A,r as i,m as E,a as j,n as l,g as u,c as k,b as a,w as e,e as f,h as d,F,s as L,E as v,z as V,A as M,k as b}from"./index-DEc4xym2.js";const R={class:"flex justify-between"},$=f("b",null,"key池管理",-1),z={class:"flex justify-between",style:{width:"100%"}},D=A({__name:"secret",setup(I){const o=i([]),_=E({chatGptKey:[]});i({chatGptKey:[{required:!0,trigger:"blur",message:"请填写您的chatGpt的key"}]});const p=i();async function m(){const t=await h.queryGptKeys();o.value=t.data.map(n=>({configKey:n.configKey,configVal:n.configVal,status:n.status})),t.data.length===0&&y(),_.chatGptKey=o.value}function y(){o.value.push({configKey:"",configVal:"",status:1})}function w(t){o.value.splice(t,1)}function x(){var t;(t=p.value)==null||t.validate(async n=>{if(n){try{await h.setGptKeys({configs:o.value}),v.success("变更配置信息成功")}catch{}m()}else v.error("请填写完整信息")})}return j(()=>{m()}),(t,n)=>{const c=l("el-button"),C=l("el-input"),K=l("el-switch"),G=l("el-form-item"),U=l("el-col"),B=l("el-row"),N=l("el-form"),q=l("el-card");return u(),k("div",null,[a(q,{style:{margin:"20px"}},{header:e(()=>[f("div",R,[$,a(c,{class:"button",text:"",onClick:x},{default:e(()=>[d(" 保存设置 ")]),_:1})])]),default:e(()=>[a(N,{ref_key:"formRef",ref:p,model:_,"label-width":"80px"},{default:e(()=>[a(B,null,{default:e(()=>[a(U,{xs:24,md:21,lg:16,xl:13},{default:e(()=>[(u(!0),k(F,null,L(o.value,(s,g)=>(u(),V(G,{key:s.configKey,label:`key-${g+1}`,prop:"chatGptKey"},{default:e(()=>[f("div",z,[a(C,{modelValue:s.configVal,"onUpdate:modelValue":r=>s.configVal=r,placeholder:"请填写您的ChatGpt-Key",clearable:"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),o.value.length!==1?(u(),V(c,{key:0,type:"danger",plain:"",class:"ml-1",onClick:r=>w(g)},{default:e(()=>[d(" 删除 ")]),_:2},1032,["onClick"])):M("",!0),a(K,{modelValue:s.status,"onUpdate:modelValue":r=>s.status=r,class:"ml-5","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),a(c,{class:"mt-5",style:{"margin-left":"80px"},onClick:y},{default:e(()=>[d(" 添加key ")]),_:1})]),_:1},8,["model"])]),_:1})])}}});typeof b=="function"&&b(D);export{D as default};
