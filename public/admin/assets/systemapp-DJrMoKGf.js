
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-DgN2PCOq.js";import{A as k}from"./app-DDimW9AH.js";import{d as z,r,m as N,a as U,n as s,q as J,g as w,c as R,b as e,w as a,y as j,z as F,h as c,e as P,E as m,k as M}from"./index-B-LUCRde.js";const T={class:"flex justify-end mr-5"},E=z({__name:"systemapp",setup(G){const V=r(0),d=r(!1),p=r(!1),_=r([]),l=N({id:"",name:"",preset:"",appModel:""});function h(t){t==null||t.resetFields()}const f=r();async function y(){d.value=!0;try{const{data:t}=await k.querySystemApp({});_.value=t.rows,V.value=t.count}catch(t){console.error("查询系统应用失败:",t),m.error("查询失败")}finally{d.value=!1}}function x(t){l.id=t.id,l.name=t.name,l.preset=t.preset,l.appModel=t.appModel,p.value=!0}async function C(){try{await k.updateSystemApp({id:l.id,name:l.name,preset:l.preset,appModel:l.appModel}),m.success("更新成功"),p.value=!1,y()}catch{m.error("更新失败")}}return U(()=>{y()}),(t,o)=>{const A=s("el-alert"),v=q,i=s("el-table-column"),u=s("el-button"),B=s("el-table"),b=s("el-input"),g=s("el-form-item"),D=s("el-form"),S=s("el-dialog"),$=J("loading");return w(),R("div",null,[e(v,{class:"header"},{default:a(()=>[e(A,{"show-icon":"",title:"系统应用配置说明",description:"此处的主要配置系统应用的模型及预设信息, 思维导图用户思维导图页, 提示词优化用于MJ绘画页及对话页MJ开启提示词优化时候使用",type:"success"})]),_:1}),e(v,{style:{width:"100%"}},{default:a(()=>[j((w(),F(B,{border:"",data:_.value,style:{width:"100%"},size:"large"},{default:a(()=>[e(i,{prop:"name",label:"应用名称",width:"150px"}),e(i,{prop:"appModel",label:"使用模型",width:"150px"}),e(i,{prop:"preset",label:"预设信息"}),e(i,{fixed:"right",label:"操作",align:"center",width:"180"},{default:a(n=>[e(u,{link:"",type:"primary",size:"small",onClick:H=>x(n.row)},{default:a(()=>[c(" 变更 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,d.value]])]),_:1}),e(S,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=n=>p.value=n),"close-on-click-modal":!1,title:`修改应用：${l.name||"..."}`,width:"570",onClose:o[4]||(o[4]=()=>h(f.value))},{footer:a(()=>[P("span",T,[e(u,{onClick:o[2]||(o[2]=n=>p.value=!1)},{default:a(()=>[c("取消")]),_:1}),e(u,{type:"primary",onClick:C},{default:a(()=>[c("确认")]),_:1})])]),default:a(()=>[e(D,{ref_key:"formRef",ref:f,"label-position":"right","label-width":"70px",model:l},{default:a(()=>[e(g,{label:"使用模型",prop:"appModel"},{default:a(()=>[e(b,{modelValue:l.appModel,"onUpdate:modelValue":o[0]||(o[0]=n=>l.appModel=n)},null,8,["modelValue"])]),_:1}),e(g,{label:"预设信息",prop:"preset"},{default:a(()=>[e(b,{modelValue:l.preset,"onUpdate:modelValue":o[1]||(o[1]=n=>l.preset=n),type:"textarea",rows:6},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});typeof M=="function"&&M(E);export{E as default};
