
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-D6-4wUAO.js";import{d as K,m as N,r as j,a as D,n as d,g as S,c as A,b as e,w as l,h as c,i as M,J as V,e as r,E as B,j as E,_ as O,k as U}from"./index-CAe0BuuW.js";import{a as w}from"./config-CwtVyG0K.js";const $=r("div",{class:"flex items-center gap-4"},"全局参数设置",-1),H=r("div",{class:"text-sm/6"},[r("div",null,[c(" 系统默认的请求地址是 "),r("a",{href:"https://api.openai.com",target:"_blank"},"https://api.openai.com"),c("，国内服务器可能无法访问，需使用自己的代理或中转。 ")]),r("div",null," 此处配置为全局配置，一些系统内置的自动服务会使用到该模型。另外，当模型不配置 Key 以及 Url 时，会使用全局配置。 "),r("div",null,[c(" API 中转推荐 "),r("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"https://api.lightai.io"),c("，支持OpenAI，Midjourney 以及多种国内外模型，无强制绑定关系，可按需选择。 ")])],-1),J=r("div",{style:{width:"250px"}},[r("p",null,"开启后、对话模型将会继承上一次对话的模型、默认开启")],-1),R=r("div",{style:{width:"250px"}}," 开启连续绘画会在使用 Dalle 绘图的时候,调用全局模型,根据上文总结绘画要求 ",-1),z=r("div",{style:{width:"250px"}}," 开启优化后, MJ 提示词默认会使用全局模型进行翻译/联想, 不再单独扣费, 一般中转会自带翻译, 请根据实际情况选择。 ",-1),F=K({__name:"interface",setup(G){const t=N({openaiBaseUrl:"",openaiBaseKey:"",openaiTimeout:"",openaiBaseModel:"gpt-3.5-turbo",openaiTemperature:1,mjNotSaveImg:0,mjProxyImgUrl:"",systemPreMessage:"",mjNotUseProxy:1,isMjTranslate:0,mjTranslatePrompt:"",isDalleChat:1,isModelInherited:1}),P=j({openaiBaseUrl:[{required:!1,trigger:"blur",message:"请填写openai的请求地址"}],isMjTranslate:[{required:!1,trigger:"blur",message:"是否开启翻译/联想"}],isDalleChat:[{required:!1,trigger:"blur",message:"是否开启连续绘画"}],isModelInherited:[{required:!1,trigger:"blur",message:"是否继承模型"}],openaiTimeout:[{required:!1,trigger:"blur",message:"请填写openai的超时时间（单位ms）"}],openaiBaseModel:[{required:!1,trigger:"blur",message:"请填写全局模型，用于后台一些静默性赋能操作"}],openaiTemperature:[{required:!1,trigger:"blur",message:"请填写温度"}],mjTranslatePrompt:[{required:!1,trigger:"blur",message:"用于翻译 / 联想的提示词"}]}),v=j();async function T(){const u=await w.queryConfig({keys:["openaiBaseUrl","openaiBaseKey","openaiTimeout","openaiBaseModel","openaiTemperature","mjNotSaveImg","mjProxyImgUrl","systemPreMessage","mjNotUseProxy","isMjTranslate","mjTranslatePrompt","isDalleChat","isModelInherited"]}),{openaiBaseUrl:a="",openaiBaseKey:g="",openaiTimeout:x=300,openaiBaseModel:b="gpt-3.5-turbo",openaiTemperature:p=1,isMjTranslate:s="",mjNotSaveImg:n,mjProxyImgUrl:i,systemPreMessage:m,mjNotUseProxy:f,mjTranslatePrompt:_,isDalleChat:h,isModelInherited:y}=u.data;Object.assign(t,{openaiBaseUrl:a,openaiBaseKey:g,openaiTimeout:x,isMjTranslate:s,openaiTemperature:p,openaiBaseModel:b,mjNotSaveImg:n,mjProxyImgUrl:i,systemPreMessage:m,mjNotUseProxy:f,mjTranslatePrompt:_,isDalleChat:h,isModelInherited:y})}function I(){var u;(u=v.value)==null||u.validate(async a=>{if(a){try{await w.setConfig({settings:C(t)}),B.success("变更配置信息成功")}catch{}T()}else B.error("请填写完整信息")})}function C(u){return Object.keys(u).map(a=>({configKey:a,configVal:u[a]}))}return D(()=>{T()}),(u,a)=>{const g=E,x=O,b=q,p=d("el-input"),s=d("el-form-item"),n=d("el-col"),i=d("el-row"),m=d("el-switch"),f=d("el-icon"),_=d("el-tooltip"),h=d("el-input-number"),y=d("el-form"),k=d("el-card");return S(),A("div",null,[e(b,null,{title:l(()=>[$]),content:l(()=>[H]),default:l(()=>[e(x,{text:"",outline:"",onClick:I},{default:l(()=>[e(g,{name:"i-ri:file-text-line"}),c(" 保存设置 ")]),_:1})]),_:1}),e(k,{style:{margin:"20px"}},{default:l(()=>[e(y,{ref_key:"formRef",ref:v,rules:P.value,model:t,"label-width":"220px"},{default:l(()=>[e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"请求地址",prop:"openaiBaseUrl","label-width":"120px"},{default:l(()=>[e(p,{modelValue:t.openaiBaseUrl,"onUpdate:modelValue":a[0]||(a[0]=o=>t.openaiBaseUrl=o),placeholder:"默认地址: https://api.openai.com 第三方代理推荐：https://api.lightai.io",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"全局key",prop:"openaiBaseKey","label-width":"120px"},{default:l(()=>[e(p,{modelValue:t.openaiBaseKey,"onUpdate:modelValue":a[1]||(a[1]=o=>t.openaiBaseKey=o),placeholder:"请填写模型全局 Key 信息，当模型 Key 为空时调用",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"全局模型",prop:"openaiBaseModel","label-width":"120px"},{default:l(()=>[e(p,{modelValue:t.openaiBaseModel,"onUpdate:modelValue":a[2]||(a[2]=o=>t.openaiBaseModel=o),placeholder:"全局模型配置，用于后台一些静默赋能操作",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"继承对话模型",prop:"isModelInherited","label-width":"120"},{default:l(()=>[e(m,{modelValue:t.isModelInherited,"onUpdate:modelValue":a[3]||(a[3]=o=>t.isModelInherited=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(_,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[J]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(M(V))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"连续绘画",prop:"isDalleChat","label-width":"120"},{default:l(()=>[e(m,{modelValue:t.isDalleChat,"onUpdate:modelValue":a[4]||(a[4]=o=>t.isDalleChat=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(_,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[R]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(M(V))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"提示词优化",prop:"isMjTranslate","label-width":"120"},{default:l(()=>[e(m,{modelValue:t.isMjTranslate,"onUpdate:modelValue":a[5]||(a[5]=o=>t.isMjTranslate=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(_,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[z]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(M(V))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"Temperature",prop:"openaiTemperature","label-width":"120px"},{default:l(()=>[e(h,{modelValue:t.openaiTemperature,"onUpdate:modelValue":a[6]||(a[6]=o=>t.openaiTemperature=o),"controls-position":"right",min:0,max:2,step:.1,placeholder:"模型 Temperature 设置，默认1",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"超时时间",prop:"openaiTimeout","label-width":"120px"},{default:l(()=>[e(p,{modelValue:t.openaiTimeout,"onUpdate:modelValue":a[7]||(a[7]=o=>t.openaiTimeout=o),placeholder:"openai超时时间设置、默认300s 单位：秒（s）",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"全局头部预设",prop:"systemPreMessage","label-width":"120px"},{default:l(()=>[e(p,{modelValue:t.systemPreMessage,"onUpdate:modelValue":a[8]||(a[8]=o=>t.systemPreMessage=o),type:"textarea",rows:8,placeholder:"请填写模型全局头部预设信息！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof U=="function"&&U(F);export{F as default};
