
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as L}from"./index-38e73db4.js";import{a as h}from"./config-61dee393.js";import{d as q,r as u,Q as E,x as J,h as n,o as j,c as K,e,f as l,a as d,l as v,I as g,J as y,E as k,q as U}from"./index-b779f4e0.js";const Q={class:"flex justify-between"},F=d("b",null,[v("MJ参数设置：（推荐使用支持的"),d("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"第三方中转"),v("）")],-1),O=d("div",{style:{width:"250px"}}," 默认会存储图片到配置的存储中、如果开启此选择则表示不保存原图到我们配置的存储上、直接反代访问原始图片、这样可以进一步节省空间、但访问速度及稳定性可能有所降低！ ",-1),R=d("div",{style:{width:"250px"}}," 开启不使用代理将直接使用重中转获取到的链接、原生discord地址国内无法访问! ",-1),W=d("div",{style:{width:"250px"}}," 开启优化后, MJ 提示词默认会使用全局模型进行翻译/联想, 不再单独扣费, 请自行选择 ",-1),A=d("div",{style:{width:"250px"}}," 隐藏客户端绘图页面的【不需要的元素模块】【优化模块】。隐藏后用户不可选择无法选中模块 ",-1),D=q({__name:"proxy",setup(z){const b=u([]);u(!1),u(""),u(null);const t=E({mjTimeoutMs:"500000",mjProxyUrl:"",mjKey:"",mjLimitCount:"2",mjNotSaveImg:"0",mjHideNotBlock:"0",mjHideWorkIn:"0",isMjTranslate:0,mjNotUseProxy:1,mjProxyImgUrl:"",mjTranslatePrompt:""}),P=u({}),w=u();async function N(){const s=await h.queryConfig({keys:["mjTimeoutMs","mjKey","mjProxyUrl","mjLimitCount","mjNotSaveImg","mjHideNotBlock","mjHideWorkIn","drawingStyles","isMjTranslate","mjNotUseProxy","mjProxyImgUrl","isDalleChat","mjTranslatePrompt"]});Object.assign(t,s.data),s.data.drawingStyles?b.value=s.data.drawingStyles.split(","):b.value=[]}function I(){var s;(s=w.value)==null||s.validate(async o=>{if(o){try{await h.setConfig({settings:C(t)}),k.success("变更配置信息成功")}catch{}N()}else k.error("请填写完整信息")})}function C(s){return Object.keys(s).map(o=>({configKey:o,configVal:s[o]}))}return J(()=>{N()}),(s,o)=>{const V=n("el-alert"),M=L,T=n("el-button"),x=n("el-input"),m=n("el-form-item"),r=n("el-col"),i=n("el-row"),c=n("el-switch"),p=n("QuestionFilled"),_=n("el-icon"),f=n("el-tooltip"),S=n("el-divider"),B=n("el-form"),H=n("el-card");return j(),K("div",null,[e(M,null,{default:l(()=>[e(V,{closable:!1,"show-icon":"",title:"绘画参数配置说明",description:"绘画参数配置页面允许管理员自定义绘图功能的关键设置，包括绘图并发限制、是否存储图片、使用代理选项以及提示词的优化。",type:"success"})]),_:1}),e(H,{style:{margin:"20px"}},{header:l(()=>[d("div",Q,[F,e(T,{class:"button",text:"",onClick:I},{default:l(()=>[v(" 保存设置 ")]),_:1})])]),default:l(()=>[e(B,{ref_key:"formRef",ref:w,rules:P.value,model:t,"label-width":"150px"},{default:l(()=>[e(i,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"绘图并发限制",prop:"mjLimitCount","label-width":"120"},{default:l(()=>[e(x,{modelValue:t.mjLimitCount,"onUpdate:modelValue":o[0]||(o[0]=a=>t.mjLimitCount=a),placeholder:"单人同时绘制限制数量、同一时间最多可以绘制几张！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"不存储图片",prop:"mjNotSaveImg","label-width":"120"},{default:l(()=>[e(c,{modelValue:t.mjNotSaveImg,"onUpdate:modelValue":o[1]||(o[1]=a=>t.mjNotSaveImg=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[O]),default:l(()=>[e(_,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(p)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[1].includes(Number(t.mjNotSaveImg))?(j(),g(i,{key:0},{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"不使用代理",prop:"mjNotUseProxy","label-width":"120"},{default:l(()=>[e(c,{modelValue:t.mjNotUseProxy,"onUpdate:modelValue":o[2]||(o[2]=a=>t.mjNotUseProxy=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[R]),default:l(()=>[e(_,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(p)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),[1].includes(Number(t.mjNotSaveImg))&&[0].includes(Number(t.mjNotUseProxy))?(j(),g(i,{key:1},{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"反代地址",prop:"mjProxyImgUrl","label-width":"120px"},{default:l(()=>[e(x,{modelValue:t.mjProxyImgUrl,"onUpdate:modelValue":o[3]||(o[3]=a=>t.mjProxyImgUrl=a),placeholder:"Midjourney 反代地址，为空将直接使用原链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):y("",!0),e(i,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"提示词优化",prop:"isMjTranslate","label-width":"120"},{default:l(()=>[e(c,{modelValue:t.isMjTranslate,"onUpdate:modelValue":o[4]||(o[4]=a=>t.isMjTranslate=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[W]),default:l(()=>[e(_,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(p)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[1].includes(Number(t.isMjTranslate))?(j(),g(i,{key:2},{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"优化提示词",prop:"mjTranslatePrompt","label-width":"120px"},{default:l(()=>[e(x,{type:"textarea",rows:5,modelValue:t.mjTranslatePrompt,"onUpdate:modelValue":o[5]||(o[5]=a=>t.mjTranslatePrompt=a),placeholder:"Midjourney 翻译/联想提示词",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):y("",!0),e(i,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"隐藏高级功能",prop:"mjHideNotBlock","label-width":"120"},{default:l(()=>[e(c,{modelValue:t.mjHideNotBlock,"onUpdate:modelValue":o[6]||(o[6]=a=>t.mjHideNotBlock=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[A]),default:l(()=>[e(_,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(p)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(S)]),_:1},8,["rules","model"])]),_:1})])}}});typeof U=="function"&&U(D);export{D as default};
