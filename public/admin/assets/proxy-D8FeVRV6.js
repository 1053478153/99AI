
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-DKdjIYRj.js";import{a as h}from"./config-BQ9gBCXa.js";import{d as q,r as i,a as N,m as D,n as a,g as k,c as E,b as e,w as l,e as r,h as y,i as g,J as j,z as K,A,E as V,k as U}from"./index-DEc4xym2.js";const J={class:"flex justify-between"},O=r("b",null,[y("MJ参数设置："),r("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"第三方中转"),y("推荐")],-1),R=r("div",{style:{width:"250px"}}," 默认会存储图片到配置的存储中、如果开启此选择则表示不保存原图到我们配置的存储上、直接反代访问原始图片、这样可以进一步节省空间、但访问速度及稳定性可能有所降低！ ",-1),W=r("div",{style:{width:"250px"}}," 开启不使用代理将直接使用重中转获取到的链接、原生discord地址国内无法访问! ",-1),z=r("div",{style:{width:"250px"}}," 隐藏客户端绘图页面的【不需要的元素模块】【优化模块】。隐藏后用户不可选择无法选中模块 ",-1),$=q({__name:"proxy",setup(F){const c=i();i(!1),i(""),i();function C(){t.drawingStyles&&(c.value=t.drawingStyles.split(","))}N(()=>{C()});const t=D({mjTimeoutMs:"500000",mjProxyUrl:"",mjKey:"",mjLimitCount:"2",mjNotSaveImg:"0",mjHideNotBlock:"0",mjHideWorkIn:"0",drawingStyles:"",isMjTranslate:0,mjNotUseProxy:1,mjProxyImgUrl:"",isDalleChat:0,mjTranslatePrompt:""}),P=i({}),x=i();async function v(){const n=await h.queryConfig({keys:["mjTimeoutMs","mjKey","mjProxyUrl","mjLimitCount","mjNotSaveImg","mjHideNotBlock","mjHideWorkIn","drawingStyles","isMjTranslate","mjNotUseProxy","mjProxyImgUrl","isDalleChat","mjTranslatePrompt"]});Object.assign(t,n.data),n.data.drawingStyles?c.value=n.data.drawingStyles.split(","):c.value=[]}function S(){var n;t.drawingStyles=c.value.join(","),(n=x.value)==null||n.validate(async o=>{if(o){try{await h.setConfig({settings:I(t)}),V.success("变更配置信息成功")}catch{}v()}else V.error("请填写完整信息")})}function I(n){return Object.keys(n).map(o=>({configKey:o,configVal:n[o]}))}return N(()=>{v()}),(n,o)=>{const b=a("el-alert"),B=L,M=a("el-button"),w=a("el-input"),m=a("el-form-item"),d=a("el-col"),u=a("el-row"),_=a("el-switch"),f=a("el-icon"),p=a("el-tooltip"),H=a("el-form"),T=a("el-card");return k(),E("div",null,[e(B,null,{default:l(()=>[e(b,{closable:!1,"show-icon":"",title:"绘画参数配置说明",description:"绘画参数配置页面允许管理员自定义绘图功能的关键设置，包括绘图并发限制、是否存储图片、使用代理选项以及提示词的优化。",type:"success"})]),_:1}),e(T,{style:{margin:"20px"}},{header:l(()=>[r("div",J,[O,e(M,{class:"button",text:"",onClick:S},{default:l(()=>[y(" 保存设置 ")]),_:1})])]),default:l(()=>[e(H,{ref_key:"formRef",ref:x,rules:P.value,model:t,"label-width":"150px"},{default:l(()=>[e(u,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"绘图并发限制",prop:"mjLimitCount","label-width":"120"},{default:l(()=>[e(w,{modelValue:t.mjLimitCount,"onUpdate:modelValue":o[0]||(o[0]=s=>t.mjLimitCount=s),placeholder:"单人同时绘制限制数量、同一时间最多可以绘制几张！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"不存储图片",prop:"mjNotSaveImg","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.mjNotSaveImg,"onUpdate:modelValue":o[1]||(o[1]=s=>t.mjNotSaveImg=s),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(p,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[R]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(g(j))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"不使用代理",prop:"mjNotUseProxy","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.mjNotUseProxy,"onUpdate:modelValue":o[2]||(o[2]=s=>t.mjNotUseProxy=s),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(p,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[W]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(g(j))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[0].includes(Number(t.mjNotUseProxy))?(k(),K(u,{key:0},{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"反代地址",prop:"mjProxyImgUrl","label-width":"120px"},{default:l(()=>[e(w,{modelValue:t.mjProxyImgUrl,"onUpdate:modelValue":o[3]||(o[3]=s=>t.mjProxyImgUrl=s),placeholder:"Midjourney 反代地址，为空将直接使用原链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):A("",!0),e(u,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(m,{label:"隐藏高级功能",prop:"mjHideNotBlock","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.mjHideNotBlock,"onUpdate:modelValue":o[4]||(o[4]=s=>t.mjHideNotBlock=s),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(p,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[z]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(g(j))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof U=="function"&&U($);export{$ as default};
