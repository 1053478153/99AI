
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-DKdjIYRj.js";import{A as P}from"./mj-CpOHr84c.js";import{d as le,r as n,m as z,p as N,a as ae,n as r,q as oe,g as y,c as j,b as e,w as l,h as _,i,B as se,y as O,z as x,e as V,t as b,J as S,F as re,s as ne,D as ie,E as A,G as de,k as F}from"./index-DEc4xym2.js";const ue={class:"w-full overflow-y-scroll whitespace-nowrap"},pe=V("div",{style:{width:"250px"}},"关闭当前提示词、用户端将不再展示！",-1),ce=V("div",{style:{width:"250px"}}," 携带左侧参数将会对提示词的参数复写、不携带则以自定义提示词中的指令参数为准！ ",-1),me={class:"mr-5 flex justify-end"},_e=le({__name:"prompts",setup(fe){n(),n(),n(0);const v=n(!1),J=n(!1);n(!1);const h=n(),u=n(0),s=z({isCarryParams:!0,status:!0,title:"",order:100,prompt:"",aspect:"16:9"}),L=n([{aspect:"1:1"},{aspect:"4:3"},{aspect:"3:4"},{aspect:"16:9"},{aspect:"9:16"}]),M=z({isCarryParams:[{required:!0,message:"请选择你是否需要携带参数",trigger:"change"}],status:[{required:!0,message:"请选择提示词开启状态",trigger:"change"}],title:[{required:!0,message:"请填写您的提示词信息",trigger:"blur"}],order:[{required:!0,message:"请填写您的排序id 越大越靠前",trigger:"blur"}],prompt:[{required:!0,message:"请填写提示词详细内容",trigger:"change"}],aspect:[{required:!0,message:"请选择图片比例",trigger:"change"}]});function R(o){u.value=0,o==null||o.resetFields()}const p=n(!1),T=N(()=>u.value?"更新提示词":"新增提示词"),I=N(()=>u.value?"确认更新":"确认新增"),q=n([]);async function k(){try{v.value=!0;const o=await P.queryPrompts();v.value=!1,q.value=o.data}catch{v.value=!1}}async function G(o){const{id:a}=o;await P.delPrompt({id:a}),A({type:"success",message:"操作完成！"}),k()}function H(o){u.value=o.id;const{status:a,title:c,prompt:g,order:m,isCarryParams:w,aspect:d}=o;de(()=>{Object.assign(s,{status:a,title:c,prompt:g,order:m,isCarryParams:w,aspect:d})}),p.value=!0}async function K(o){o==null||o.validate(async a=>{if(a){const c=JSON.parse(JSON.stringify(s));delete c.id,u.value&&(c.id=u.value),await P.setPrompt(c),A({type:"success",message:"操作成功！"}),u.value=0,p.value=!1,k()}})}return ae(()=>{k()}),(o,a)=>{const c=r("el-alert"),g=r("el-icon"),m=r("el-button"),w=te,d=r("el-table-column"),D=r("el-tag"),Q=r("el-popconfirm"),W=r("el-table"),U=r("el-switch"),$=r("el-tooltip"),f=r("el-form-item"),C=r("el-input"),X=r("el-option"),Y=r("el-select"),Z=r("el-form"),E=r("el-dialog"),B=oe("loading");return y(),j("div",null,[e(w,{class:"header"},{default:l(()=>[e(c,{"show-icon":"",title:"提示词说明",description:"此处的提示词将会在用户端的midjoney绘画中展示出来、用户点击你给与的预设将直接将提示词写入输入框中！",type:"success"}),e(m,{type:"success",class:"ml-3",size:"large",onClick:a[0]||(a[0]=t=>p.value=!0)},{default:l(()=>[_(" 添加提示词 "),e(g,{class:"ml-3"},{default:l(()=>[e(i(se))]),_:1})]),_:1})]),_:1}),e(w,{style:{width:"100%"}},{default:l(()=>[O((y(),x(W,{border:"",data:i(q),style:{width:"100%"},size:"large"},{default:l(()=>[e(d,{prop:"title",label:"提示词名称",width:"180"}),e(d,{prop:"aspect",label:"图片比例",width:"180"}),e(d,{prop:"prompt",label:"提示词内容"},{default:l(t=>[V("div",ue,b(t.row.prompt),1)]),_:1}),e(d,{prop:"status",align:"center",label:"提示词状态",width:"110"},{default:l(t=>[e(D,{type:t.row.status?"success":"danger"},{default:l(()=>[_(b(t.row.status?"开启中":"已关闭"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"isCarryParams",align:"center",label:"携带用户的参数",width:"150"},{default:l(t=>[e(D,{type:t.row.isCarryParams?"success":"warning"},{default:l(()=>[_(b(t.row.isCarryParams?"携带":"不携带"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"order",align:"center",label:"排序ID",width:"90"}),e(d,{fixed:"right",label:"操作",align:"center",width:"180"},{default:l(t=>[e(m,{link:"",type:"primary",size:"small",onClick:ee=>H(t.row)},{default:l(()=>[_(" 变更 ")]),_:2},1032,["onClick"]),e(Q,{title:"确认删除此提示词么?",width:"180","icon-color":"red",onConfirm:ee=>G(t.row)},{reference:l(()=>[e(m,{link:"",type:"danger",size:"small"},{default:l(()=>[_(" 删除秘钥 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[B,i(v)]])]),_:1}),e(E,{modelValue:i(p),"onUpdate:modelValue":a[9]||(a[9]=t=>ie(p)?p.value=t:null),"close-on-click-modal":!1,title:T.value,width:"770",onClose:a[10]||(a[10]=t=>R(i(h)))},{footer:l(()=>[V("span",me,[e(m,{onClick:a[7]||(a[7]=t=>p.value=!1)},{default:l(()=>[_("取消")]),_:1}),e(m,{type:"primary",onClick:a[8]||(a[8]=t=>K(i(h)))},{default:l(()=>[_(b(I.value),1)]),_:1})])]),default:l(()=>[O((y(),x(Z,{ref_key:"formPackageRef",ref:h,"label-position":"right","label-width":"120px",model:s,rules:M},{default:l(()=>[e(f,{label:"启用状态",prop:"status"},{default:l(()=>[e(U,{modelValue:s.status,"onUpdate:modelValue":a[1]||(a[1]=t=>s.status=t)},null,8,["modelValue"]),e($,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[pe]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(i(S))]),_:1})]),_:1})]),_:1}),e(f,{label:"携带左侧参数",prop:"isCarryParams"},{default:l(()=>[e(U,{modelValue:s.isCarryParams,"onUpdate:modelValue":a[2]||(a[2]=t=>s.isCarryParams=t)},null,8,["modelValue"]),e($,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ce]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(i(S))]),_:1})]),_:1})]),_:1}),e(f,{label:"排序Order",prop:"order"},{default:l(()=>[e(C,{modelValue:s.order,"onUpdate:modelValue":a[3]||(a[3]=t=>s.order=t),placeholder:"排序id越大越靠前"},null,8,["modelValue"])]),_:1}),e(f,{label:"提示词名称",prop:"title"},{default:l(()=>[e(C,{modelValue:s.title,"onUpdate:modelValue":a[4]||(a[4]=t=>s.title=t),placeholder:"请填写提示词名称（用户看到的名称）"},null,8,["modelValue"])]),_:1}),e(f,{label:"图片比例",prop:"aspect"},{default:l(()=>[e(Y,{modelValue:s.aspect,"onUpdate:modelValue":a[5]||(a[5]=t=>s.aspect=t),placeholder:"请选择图片比例",style:{width:"100%"}},{default:l(()=>[(y(!0),j(re,null,ne(i(L),t=>(y(),x(X,{key:t.aspect,label:t.aspect,value:t.aspect},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"提示词内容",prop:"proxyUrl"},{default:l(()=>[e(C,{modelValue:s.prompt,"onUpdate:modelValue":a[6]||(a[6]=t=>s.prompt=t),type:"textarea",rows:4,placeholder:"请填写提示词详细内容！"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[B,i(J)]])]),_:1},8,["modelValue","title"])])}}});typeof F=="function"&&F(_e);export{_e as default};
